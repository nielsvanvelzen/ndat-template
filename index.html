<script type="module">
import { ReactiveTemplate } from './ReactiveTemplate.js';

class Index extends ReactiveTemplate {
	constructor() {
		super(document.body);

		this.filter('json', JSON.stringify);
		this.filter('exec', val => typeof val === 'function' ? val() : val);

		this.title = 'Project Demo';
		this.input = 'Input model';

		this.obj = { hello: 'world', json: 'stringify' };
		this.color = '#000000';
		this.function_test = () => `Call function on render (${Date.now()})`;
	}
}

window.addEventListener('load', new Index());
</script>
<body>
	<!-- comment -->
	<h1>Welcome to {{ title }}</h1>
	<a @click="title = 'apple'">apple</a>
	<a @click="title = 'pear'">pear</a>
	<a @click="title = 'banana'">banana</a>
	<hr />

	<pre>{{ obj | json }}</pre>
	<hr />

	<h1>{{ input }}</h1>
	<input @keyup="input = this.value" @change="input = this.value" :value="input" autofocus="autofocus" />
	<a @click="input = 'f'">respect</a>
	<a @click="input = ''">clear</a>
	<hr />

	<span>{{ function_test | exec }}</span>
	<hr />

	<span>{{ unknown_property }} is invisible</span>
	<hr />

	<div @click="title = 'test'">Test</div>
	<hr />

	<div class="nested but content">
		Before: {{title}}
		<div>middle: {{title}}</div>
		after: {{title}}
	</div>

	<label :style="'color: ' + color">
		<input type="color" @change="color = this.value" />
		{{color}}
	</label>
</body>